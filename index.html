<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creative Web Designer Portfolio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
    <div class="shooting-star" style="top: 20%; left: 10%;"></div>
    <div class="shooting-star" style="top: 60%; left: 30%;"></div>
    <!-- SVG Filters -->
    <svg width="0" height="0" style="position: absolute;">
        <filter id="gooey">
            <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
            <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 20 -10"
                result="gooey" />
            <feComposite in="SourceGraphic" in2="gooey" operator="atop" />
        </filter>
        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#ff3366" />
            <stop offset="100%" stop-color="#ff6b6b" />
        </linearGradient>
    </svg>

    <!-- Scroll Progress Bar -->
    <div class="scroll-progress"></div>

    <!-- Loading Screen -->
    <div class="loader">
        <div class="loader-text">LOADING...</div>
    </div>

    <!-- Custom Cursor -->
    <div class="mouse-cursor">
        <div class="cursor-dot"></div>
        <div class="cursor-outline"></div>
    </div>
    <div class="default-cursor-dot"></div>
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <a href="#" class="logo">RYUYA<span>.</span></a>
        <div class="nav-items">
            <button class="theme-toggle" id="theme-toggle" aria-label="ダークモード切替">🌙</button>
            <div class="menu-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Menu Overlay -->
    <div class="menu-overlay">
        <div class="menu-items">
            <a href="#home" class="menu-link">ホーム</a>
            <a href="#about" class="menu-link">プロフィール</a>
            <a href="#projects" class="menu-link">作品</a>
            <a href="#contact" class="menu-link">お問い合わせ</a>
        </div>
    </div>

    <!-- Hero Section -->
    <header id="home">
        <div class="particle-container"></div>
        <div class="floating-shapes">
            <div class="blob"></div>
            <div class="blob"></div>
        </div>
        <div class="hero-content">
            <img src="img/human.png" alt="宇宙飛行士" class="human">
            <h1 class="glitch-title" data-text="WEB DESIGNER">WEB DESIGNER</h1>
            <a href="#projects" class="cta-button">
                <button type="button" class="btn">
                    <strong>作品を見る</strong>
                    <div id="container-stars">
                        <div id="stars"></div>
                    </div>

                    <div id="glow">
                        <div class="circle"></div>
                        <div class="circle"></div>
                    </div>
                </button>
            </a>

        </div>
    </header>

    <!-- About Section -->
    <section id="about" class="section">
        <div class="container">
            <h2 class="section-title">プロフィール</h2>
            <div class="fade-in-up">
                <div class="profile">
                    <img src="img/human_front.png" alt="宇宙飛行士の正面">
                    <div class="profile-text">
                        <p>さいとう りゅうや / BtoB美容通販のデザイナー兼フロントエンドエンジニア<br>
                            企画・デザイン・コーディング・効果測定まで一貫して担当</p>
                        <ul>
                            <li>【強み】</li>
                            <li>- 一定のクオリティとスピードを両立したデザイン</li>
                            <li>- デザインが売上に与える影響を意識した改善</li>
                            <li>- ターゲットに応じたデザイン調整の経験</li>
                            <li>- ユーザーのニーズを理解し、最適なデザインを提案</li>
                        </ul>
                        <ul>
                            <li>【実績】</li>
                            <li>- 既存サイトのUI改善でユーザー満足度向上</li>
                            <li>- キャンペーンのデザインでCVR 12％向上</li>
                        </ul>
                        </ul>
                        <ul>
                            <li>【学習・挑戦】</li>
                            <li>- プログラミングを独学で学び、業務効率化ツールを開発</li>
                            <li>- 最新デザイン・マーケティング動向の情報収集を継続</li>
                        </ul>
                        </p>
                    </div>
                </div>
                <h3 class="profile-title split-text">スキル</h3>
                <div class="skills-container">
                    <div class="skill-item fade-in-up">
                        <div class="skill-circle">
                            <svg viewBox="0 0 160 160">
                                <circle class="bg" cx="80" cy="80" r="70"></circle>
                                <circle class="progress" cx="80" cy="80" r="70" data-value="100"></circle>
                            </svg>
                            <div class="skill-circle-text">120%</div>
                        </div>
                        <h4 class="skill-title split-text">UI/UXデザイン</h4>
                        <p class="skill-desc">ユーザー体験を重視した直感的なデザインを提供します。</p>
                    </div>
                    <div class="skill-item fade-in-up">
                        <div class="skill-circle">
                            <svg viewBox="0 0 160 160">
                                <circle class="bg" cx="80" cy="80" r="70"></circle>
                                <circle class="progress" cx="80" cy="80" r="70" data-value="100"></circle>
                            </svg>
                            <div class="skill-circle-text">100%</div>
                        </div>
                        <h4 class="skill-title split-text">フロントエンド開発</h4>
                        <p class="skill-desc">HTML, CSS, JavaScriptを使用した高品質な実装が可能です。</p>
                    </div>
                    <div class="skill-item fade-in-up">
                        <div class="skill-circle">
                            <svg viewBox="0 0 160 160">
                                <circle class="bg" cx="80" cy="80" r="70"></circle>
                                <circle class="progress" cx="80" cy="80" r="70" data-value="100"></circle>
                            </svg>
                            <div class="skill-circle-text">100%</div>
                        </div>
                        <h4 class="skill-title split-text">グラフィックデザイン</h4>
                        <p class="skill-desc">ブランドに合わせた魅力的なビジュアルを作成します。</p>
                    </div>
                </div>
            </div>

            <h3 class="profile-title split-text">経歴</h3>
            <div class="timeline">
                <div class="timeline-item fade-in-up">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <span class="timeline-date">2022年 - 現在</span>
                        <h3 class="timeline-title split-text">BtoB美容通販のデザイナー兼フロントエンドエンジニア</h3>
                        <p class="timeline-desc">- キャンペーンLPや商品ページのデザイン制作<br>
                            - HTML/CSSコーディング、JavaScript実装<br>
                            - ABテストや分析によるCVR向上施策を実施（前年比12％改善）<br>
                            - PDCAサイクルを回し、売上改善に貢献<br>
                            - 大手企業のブランドサイトやキャンペーンサイトのデザインを担当</p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <span class="timeline-date">2020年 - 2022年</span>
                        <h3 class="timeline-title split-text">専門学校卒業</h3>
                        <p class="timeline-desc">- Webデザイン・グラフィックデザインを幅広く学習<br>
                            - Photoshop、Illustrator、HTML/CSS、UI/UXデザイン</p>
                    </div>
                </div>

                <div class="timeline-item fade-in-up">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <span class="timeline-date">2001年 - 2020年</span>
                        <h3 class="timeline-title split-text">始まり</h3>
                        <p class="timeline-desc">- 自分の表現したものが人の目に触れ、心を動かすことに喜びを感じて、そこからデザインに興味を持ち始めました。</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="section">
        <div class="container">
            <h2 class="section-title">作品</h2>
            <div class="projects-grid">
                <div class="project-card fade-in-up">
                    <div class="project-card-content">
                        <div class="project-image">
                            <img src="img/portfolio.png" alt="ポートフォリオ">
                        </div>
                        <div class="project-content">
                            <h3 class="project-title split-text">ポートフォリオ</h3>
                            <p class="project-desc">
                                「デザインは無限大」をコンセプトに、ユーザビリティを重視しながら設計しました。<br>
                                インパクトはありつつも、ごちゃつかずに整理されたデザインを意識しました。<br>
                                また「宇宙」というモチーフを組み合わせることで、視覚的に認知されやすく、"宇宙の人"として覚えていただけるように工夫しています。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title">お問い合わせ</h2>
            <div class="contact-form fade-in-up">
                <form id="contactForm" onsubmit="sendEmail(event)">
                    <div class="form-group">
                        <input type="text" id="name" class="form-control" placeholder="お名前" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="email" class="form-control" placeholder="メールアドレス" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="subject" class="form-control" placeholder="件名" required>
                    </div>
                    <div class="form-group">
                        <textarea id="message" class="form-control" placeholder="メッセージ" rows="5" required></textarea>
                    </div>
                    <button type="submit" class="submit-btn">
                        <span class="btn-text">送信する</span>
                        <span class="btn-icon"><i class="fas fa-paper-plane"></i></span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#home">ホーム</a>
                <a href="#about">プロフィール</a>
                <a href="#projects">作品</a>
                <a href="#contact">お問い合わせ</a>
            </div>
            <!--
            <div class="footer-social">
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-github"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
            </div>
            -->
            <div class="footer-copyright">
                <p>&copy; 2025 RYUYA. All Rights Reserved.</p>
            </div>
        </div>
    </footer>


    <!-- Back to Top Button -->
    <a href="#home" class="back-to-top">
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <!-- 背景の星 -->
            <circle class="star" cx="15" cy="20" r="2" />
            <circle class="star" cx="85" cy="25" r="3" />
            <circle class="star" cx="70" cy="80" r="2" />
            <circle class="star" cx="30" cy="70" r="3" />

            <!-- ロケット本体 -->
            <g class="rocket" transform="translate(50, 50) rotate(-45) translate(-25, -25)">
                <!-- ロケット本体 -->
                <path class="rocket-body"
                    d="M25,10 C38,10 45,30 45,40 L45,65 C45,70 40,75 35,75 L15,75 C10,75 5,70 5,65 L5,40 C5,30 12,10 25,10 Z" />

                <!-- ロケットの窓 -->
                <circle class="rocket-window" cx="25" cy="30" r="8" />

                <!-- ロケットの羽 -->
                <path class="rocket-body" d="M5,50 L0,60 L5,65 L5,50 Z" />
                <path class="rocket-body" d="M45,50 L50,60 L45,65 L45,50 Z" />

                <!-- 炎 -->
                <path class="rocket-flame" d="M15,75 Q25,95 35,75 Z" />
            </g>
        </svg>
    </a>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            // ========================================
            // テーマ切り替え機能
            // ========================================
            const themeToggle = document.getElementById('theme-toggle');
            const body = document.body;
            const savedTheme = localStorage.getItem('theme');

            // デフォルトはダークモード（保存された設定が「light」の場合のみライトモードに）
            if (savedTheme === 'light') {
                body.classList.remove('dark-mode');
                themeToggle.textContent = '🌙';
            } else {
                body.classList.add('dark-mode');
                themeToggle.textContent = '☀️';
                if (!savedTheme) {
                    localStorage.setItem('theme', 'dark');
                }
            }

            themeToggle.addEventListener('click', function () {
                body.classList.toggle('dark-mode');
                if (body.classList.contains('dark-mode')) {
                    localStorage.setItem('theme', 'dark');
                    themeToggle.textContent = '☀️';
                } else {
                    localStorage.setItem('theme', 'light');
                    themeToggle.textContent = '🌙';
                }
            });

            // ========================================
            // カーソル機能
            // ========================================
            const cursor = document.querySelector('.cursor-dot');
            const cursorOutline = document.querySelector('.cursor-outline');
            const cursorWrapper = document.querySelector('.mouse-cursor');
            const defaultDot = document.querySelector('.default-cursor-dot');

            document.addEventListener('mousemove', function (e) {
                // オリジナルの赤い点の動き
                cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;

                // 外枠の遅延追従
                setTimeout(() => {
                    cursorOutline.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
                }, 100);

                // デフォルトカーソル位置に青い丸を配置
                defaultDot.style.left = `${e.clientX}px`;
                defaultDot.style.top = `${e.clientY}px`;
            });

            // インタラクティブ要素のホバー効果
            const interactiveElements = document.querySelectorAll('a, button, input, .interactive-element');
            interactiveElements.forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursorWrapper.classList.add('link-hover');
                });
                el.addEventListener('mouseleave', () => {
                    cursorWrapper.classList.remove('link-hover');
                });
            });

            document.addEventListener('mouseleave', function () {
                cursor.style.opacity = '0';
                cursorOutline.style.opacity = '0';
            });

            document.addEventListener('mouseenter', function () {
                cursor.style.opacity = '1';
                cursorOutline.style.opacity = '1';
            });

            // ========================================
            // マグネティックボタン効果
            // ========================================
            const magneticBtns = document.querySelectorAll('.magnetic-btn');
            magneticBtns.forEach(btn => {
                btn.addEventListener('mousemove', function (e) {
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left - rect.width / 2;
                    const y = e.clientY - rect.top - rect.height / 2;

                    this.style.transform = `translate(${x * 0.2}px, ${y * 0.3}px)`;
                    cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px) scale(0.7)`;
                    cursorOutline.style.transform = `translate(${e.clientX}px, ${e.clientY}px) scale(1.5)`;
                });

                btn.addEventListener('mouseleave', function () {
                    this.style.transform = 'translate(0px, 0px)';
                    cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px) scale(1)`;
                    cursorOutline.style.transform = `translate(${e.clientX}px, ${e.clientY}px) scale(1)`;
                });
            });

            // ========================================
            // ローダーアニメーション
            // ========================================
            const loader = document.querySelector('.loader');
            setTimeout(() => {
                loader.classList.add('hidden');
            }, 2000);

            // ========================================
            // ナビゲーションメニュー
            // ========================================
            const menuToggle = document.querySelector('.menu-toggle');
            const menuOverlay = document.querySelector('.menu-overlay');

            menuToggle.addEventListener('click', function () {
                this.classList.toggle('active');
                menuOverlay.classList.toggle('active');
                document.body.classList.toggle('menu-open');
            });

            const menuLinks = document.querySelectorAll('.menu-link');
            menuLinks.forEach(link => {
                link.addEventListener('click', function () {
                    menuToggle.classList.remove('active');
                    menuOverlay.classList.remove('active');
                    document.body.classList.remove('menu-open');
                });
            });

            // ========================================
            // スクロールアニメーション
            // ========================================
            const fadeInUpElements = document.querySelectorAll('.fade-in-up');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, {
                threshold: 0.1
            });

            fadeInUpElements.forEach(element => {
                observer.observe(element);
            });

            // ========================================
            // テキストスクランブル効果
            // ========================================
            class TextScramble {
                constructor(el) {
                    this.el = el;
                    this.chars = '!<>-_\\/[]{}—=+*^?#_';
                    this.update = this.update.bind(this);
                }

                setText(newText) {
                    const oldText = this.el.innerText;
                    const length = Math.max(oldText.length, newText.length);
                    const promise = new Promise(resolve => this.resolve = resolve);
                    this.queue = [];

                    for (let i = 0; i < length; i++) {
                        const from = oldText[i] || '';
                        const to = newText[i] || '';
                        const start = Math.floor(Math.random() * 40);
                        const end = start + Math.floor(Math.random() * 40);
                        this.queue.push({ from, to, start, end });
                    }

                    cancelAnimationFrame(this.frameRequest);
                    this.frame = 0;
                    this.update();
                    return promise;
                }

                update() {
                    let output = '';
                    let complete = 0;

                    for (let i = 0, n = this.queue.length; i < n; i++) {
                        let { from, to, start, end, char } = this.queue[i];

                        if (this.frame >= end) {
                            complete++;
                            output += to;
                        } else if (this.frame >= start) {
                            if (!char || Math.random() < 0.28) {
                                char = this.randomChar();
                                this.queue[i].char = char;
                            }
                            output += `<span class="scramble-char">${char}</span>`;
                        } else {
                            output += from;
                        }
                    }

                    this.el.innerHTML = output;

                    if (complete === this.queue.length) {
                        this.resolve();
                    } else {
                        this.frameRequest = requestAnimationFrame(this.update);
                        this.frame++;
                    }
                }

                randomChar() {
                    return this.chars[Math.floor(Math.random() * this.chars.length)];
                }
            }

            // テキストスクランブル効果を初期化
            const phrases = ['デザインは無限大', '私の作品はこちら'];
            const textScrambleElements = document.querySelectorAll('.text-scramble');

            textScrambleElements.forEach(el => {
                const fx = new TextScramble(el);
                let counter = 0;

                const next = () => {
                    fx.setText(phrases[counter]).then(() => {
                        setTimeout(next, 3000);
                    });
                    counter = (counter + 1) % phrases.length;
                };

                next();
            });

            // ========================================
            // スキルサークルアニメーション
            // ========================================
            const skillCircles = document.querySelectorAll('.skill-circle circle.progress');
            skillCircles.forEach(circle => {
                const value = circle.getAttribute('data-value');
                circle.style.setProperty('--progress', value);
            });

            // ========================================
            // 人間画像のカーソル回避機能
            // ========================================
            (function () {
                function initCursorAvoid() {
                    const humanElement = document.querySelector('.human');
                    if (!humanElement) {
                        console.error('Element with class "human" not found!');
                        return;
                    }

                    console.log('Human element found:', humanElement);

                    let originalTransform = getComputedStyle(humanElement).transform;
                    if (originalTransform === 'none') {
                        originalTransform = '';
                    }

                    let mouseX = -1000;
                    let mouseY = -1000;
                    let targetX = 0;
                    let targetY = 0;
                    let currentX = 0;
                    let currentY = 0;
                    let velocityX = 0;
                    let velocityY = 0;

                    const avoidRadius = 150;
                    const maxSpeed = 5;
                    const returnForce = 0.03;
                    const damping = 0.92;
                    const smoothingFactor = 0.15;

                    let lastTime = performance.now();
                    let lastMouseMoveTime = 0;
                    const mouseMoveThrottle = 16;

                    document.addEventListener('mousemove', function (e) {
                        const currentTime = performance.now();
                        if (currentTime - lastMouseMoveTime >= mouseMoveThrottle) {
                            mouseX = e.clientX;
                            mouseY = e.clientY;
                            lastMouseMoveTime = currentTime;
                        }
                    });

                    let isAnimationPaused = false;
                    let isReturningToOriginal = false;

                    function pauseOriginalAnimation() {
                        if (!isAnimationPaused) {
                            humanElement.style.animation = 'none';
                            isAnimationPaused = true;
                            isReturningToOriginal = false;
                        }
                    }

                    function resumeOriginalAnimation() {
                        if (isAnimationPaused && !isReturningToOriginal) {
                            isReturningToOriginal = true;

                            if (Math.abs(currentX) < 0.5 && Math.abs(currentY) < 0.5 &&
                                Math.abs(velocityX) < 0.1 && Math.abs(velocityY) < 0.1) {
                                humanElement.style.animation = 'move 10s ease-in-out infinite';
                                isAnimationPaused = false;
                                isReturningToOriginal = false;
                            }
                        }
                    }

                    function easeOutCubic(t) {
                        return 1 - Math.pow(1 - t, 3);
                    }

                    function updatePosition(currentTime) {
                        const deltaTime = currentTime - lastTime;
                        const timeScale = deltaTime / 16.67;
                        lastTime = currentTime;

                        const rect = humanElement.getBoundingClientRect();
                        const centerX = rect.left + rect.width / 2;
                        const centerY = rect.top + rect.height / 2;

                        const dx = mouseX - centerX;
                        const dy = mouseY - centerY;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < avoidRadius) {
                            pauseOriginalAnimation();

                            const angle = Math.atan2(dy, dx);
                            const forceFactor = easeOutCubic((avoidRadius - distance) / avoidRadius);
                            const force = forceFactor * maxSpeed;

                            targetX -= Math.cos(angle) * force * timeScale;
                            targetY -= Math.sin(angle) * force * timeScale;

                            const maxDisplacement = avoidRadius * 0.8;
                            targetX = Math.max(-maxDisplacement, Math.min(maxDisplacement, targetX));
                            targetY = Math.max(-maxDisplacement, Math.min(maxDisplacement, targetY));
                        } else {
                            isReturningToOriginal = true;
                            targetX *= (1 - returnForce * timeScale);
                            targetY *= (1 - returnForce * timeScale);

                            if (Math.abs(targetX) < 1 && Math.abs(targetY) < 1) {
                                targetX = 0;
                                targetY = 0;
                                resumeOriginalAnimation();
                            }
                        }

                        const smoothingFactorAdjusted = 1 - Math.pow(1 - smoothingFactor, timeScale);
                        currentX += (targetX - currentX) * smoothingFactorAdjusted;
                        currentY += (targetY - currentY) * smoothingFactorAdjusted;

                        humanElement.style.transform = `translate(${currentX}px, ${currentY}px)`;

                        requestAnimationFrame(updatePosition);
                    }

                    requestAnimationFrame(function (timestamp) {
                        lastTime = timestamp;
                        updatePosition(timestamp);
                    });
                }

                if (document.readyState === 'loading') {
                    document.addEventListener('DOMContentLoaded', initCursorAvoid);
                } else {
                    setTimeout(initCursorAvoid, 500);
                }
            })();

            // ========================================
            // GSAPアニメーション
            // ========================================
            gsap.registerPlugin(ScrollTrigger);

            // ヘッダーアニメーション
            gsap.from('.glitch-title', {
                opacity: 0,
                y: 50,
                duration: 1.5,
                delay: 2.5,
                ease: 'power4.out'
            });

            // Blobアニメーション
            gsap.to('.blob:nth-child(1)', {
                x: '+=30',
                y: '-=30',
                rotation: 360,
                duration: 20,
                repeat: -1,
                yoyo: true,
                ease: 'sine.inOut'
            });

            gsap.to('.blob:nth-child(2)', {
                x: '-=30',
                y: '+=30',
                rotation: -360,
                duration: 25,
                repeat: -1,
                yoyo: true,
                ease: 'sine.inOut'
            });

            // セクションタイトルアニメーション
            gsap.utils.toArray('.section-title').forEach(title => {
                gsap.from(title, {
                    scrollTrigger: {
                        trigger: title,
                        start: 'top 80%',
                        toggleActions: 'play none none none'
                    },
                    opacity: 0,
                    y: 30,
                    duration: 1,
                    ease: 'power3.out'
                });
            });

            // スキルサークルアニメーション
            gsap.utils.toArray('.skill-circle').forEach(circle => {
                const progress = circle.querySelector('.progress');
                const radius = progress.getAttribute('r');
                const circumference = 2 * Math.PI * radius;

                progress.style.strokeDashoffset = circumference;

                gsap.to(progress, {
                    scrollTrigger: {
                        trigger: circle,
                        start: 'top 80%',
                        toggleActions: 'play none none none'
                    },
                    strokeDashoffset: function () {
                        const value = progress.getAttribute('data-value');
                        return circumference * (1 - (value / 100));
                    },
                    duration: 1.5,
                    ease: 'power3.out'
                });
            });

            // ========================================
            // スクロール進捗バー
            // ========================================
            const scrollProgress = document.querySelector('.scroll-progress');

            window.addEventListener('scroll', () => {
                const totalHeight = document.body.scrollHeight - window.innerHeight;
                const progress = (window.pageYOffset / totalHeight) * 100;
                scrollProgress.style.width = `${progress}%`;
            });

            // ========================================
            // トップに戻るボタン
            // ========================================
            const backToTopBtn = document.querySelector('.back-to-top');

            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('active');
                } else {
                    backToTopBtn.classList.remove('active');
                }
            });

            // ========================================
            // 3Dチルトカード効果
            // ========================================
            const tiltCards = document.querySelectorAll('.tilt-card');

            tiltCards.forEach(card => {
                card.addEventListener('mousemove', function (e) {
                    const cardRect = this.getBoundingClientRect();
                    const x = e.clientX - cardRect.left;
                    const y = e.clientY - cardRect.top;

                    const centerX = cardRect.width / 2;
                    const centerY = cardRect.height / 2;

                    const rotateX = (y - centerY) / 10;
                    const rotateY = (centerX - x) / 10;

                    this.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
                });

                card.addEventListener('mouseleave', function () {
                    this.style.transform = 'perspective(1000px) rotateX(0) rotateY(0)';
                });
            });

            // ========================================
            // パーティクルネットワーク効果
            // ========================================
            const particleContainer = document.querySelector('.particle-container');
            const particleCount = 100;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                particle.style.width = `${Math.random() * 5 + 2}px`;
                particle.style.height = particle.style.width;
                particleContainer.appendChild(particle);
            }

            // ========================================
            // 分子結合アニメーション
            // ========================================
            const skills = document.querySelector('.skills-container');
            if (skills) {
                const moleculeContainer = document.createElement('div');
                moleculeContainer.className = 'molecule-container';

                for (let i = 0; i < 15; i++) {
                    const molecule = document.createElement('div');
                    molecule.className = 'molecule';
                    molecule.style.left = `${Math.random() * 100}%`;
                    molecule.style.top = `${Math.random() * 100}%`;
                    molecule.style.animationDelay = `${Math.random() * 2}s`;
                    moleculeContainer.appendChild(molecule);
                }

                skills.appendChild(moleculeContainer);

                gsap.ticker.add(() => {
                    const molecules = document.querySelectorAll('.molecule');
                    const connections = [];

                    for (let i = 0; i < molecules.length; i++) {
                        const m1 = molecules[i].getBoundingClientRect();
                        const p1 = {
                            x: m1.left + m1.width / 2,
                            y: m1.top + m1.height / 2
                        };

                        for (let j = i + 1; j < molecules.length; j++) {
                            const m2 = molecules[j].getBoundingClientRect();
                            const p2 = {
                                x: m2.left + m2.width / 2,
                                y: m2.top + m2.height / 2
                            };

                            const distance = Math.sqrt(
                                Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2)
                            );

                            if (distance < 150) {
                                connections.push({ p1, p2, distance });
                            }
                        }
                    }

                    let svg = document.querySelector('.molecule-connections');
                    if (!svg) {
                        svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
                        svg.classList.add('molecule-connections');
                        svg.style.position = 'absolute';
                        svg.style.top = '0';
                        svg.style.left = '0';
                        svg.style.width = '100%';
                        svg.style.height = '100%';
                        svg.style.pointerEvents = 'none';
                        skills.appendChild(svg);
                    }

                    svg.innerHTML = '';

                    connections.forEach(conn => {
                        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                        line.setAttribute('x1', conn.p1.x);
                        line.setAttribute('y1', conn.p1.y);
                        line.setAttribute('x2', conn.p2.x);
                        line.setAttribute('y2', conn.p2.y);
                        line.setAttribute('stroke', 'rgba(255, 100, 150, 0.2)');
                        line.setAttribute('stroke-width', '1');
                        svg.appendChild(line);
                    });
                });
            }

            // ========================================
            // インタラクティブテキストシャドウ効果
            // ========================================
            const sectionTitles = document.querySelectorAll('.section-title');

            sectionTitles.forEach(title => {
                title.addEventListener('mousemove', function (e) {
                    const rect = this.getBoundingClientRect();
                    const x = (e.clientX - rect.left) / rect.width - 0.5;
                    const y = (e.clientY - rect.top) / rect.height - 0.5;

                    const shadow1 = `${x * 20}px ${y * 20}px 10px rgba(255, 102, 107, 0.3)`;
                    const shadow2 = `${-x * 15}px ${-y * 15}px 15px rgba(102, 204, 255, 0.3)`;
                    const shadow3 = `${-x * 10}px ${y * 10}px 10px rgba(162, 89, 255, 0.2)`;

                    this.style.textShadow = `${shadow1}, ${shadow2}, ${shadow3}`;
                });

                title.addEventListener('mouseleave', function () {
                    this.style.textShadow = '';
                });
            });

            // ========================================
            // リキッドグラデーション
            // ========================================
            const contactSection = document.getElementById('contact');
            if (contactSection) {
                const liquidGradient = document.createElement('div');
                liquidGradient.className = 'liquid-gradient';
                contactSection.prepend(liquidGradient);

                contactSection.addEventListener('mousemove', function (e) {
                    const x = e.clientX / window.innerWidth;
                    const y = e.clientY / window.innerHeight;

                    liquidGradient.style.background = `radial-gradient(
                circle at ${x * 100}% ${y * 100}%,
                rgba(255, 51, 102, 0.4) 0%,
                rgba(102, 204, 255, 0.2) 50%,
                rgba(51, 51, 51, 0.1) 100%
            )`;
                });
            }

            // ========================================
            // DNAストランドアニメーション
            // ========================================
            const header = document.querySelector('header');
            if (header) {
                const dnaContainer = document.createElement('div');
                dnaContainer.className = 'dna-container';

                const dnaStrand = document.createElement('div');
                dnaStrand.className = 'dna-strand';

                for (let i = 0; i < 20; i++) {
                    const dnaRung = document.createElement('div');
                    dnaRung.className = 'dna-rung';
                    dnaRung.style.animationDelay = `${i * 0.1}s`;

                    const leftNode = document.createElement('div');
                    leftNode.className = 'dna-node left';

                    const rightNode = document.createElement('div');
                    rightNode.className = 'dna-node right';

                    const connector = document.createElement('div');
                    connector.className = 'dna-connector';

                    dnaRung.appendChild(leftNode);
                    dnaRung.appendChild(connector);
                    dnaRung.appendChild(rightNode);

                    dnaStrand.appendChild(dnaRung);
                }

                dnaContainer.appendChild(dnaStrand);
                header.appendChild(dnaContainer);
            }

            // ========================================
            // グリッチエフェクト
            // ========================================
            const glitchTitle = document.querySelector('.glitch-title');
            if (glitchTitle) {
                const content = glitchTitle.textContent;
                glitchTitle.innerHTML = `
            <span class="glitch-text">${content}</span>
            <span class="glitch-text-layer red">${content}</span>
            <span class="glitch-text-layer green">${content}</span>
            <span class="glitch-text-layer blue">${content}</span>
        `;

                setInterval(() => {
                    const layers = glitchTitle.querySelectorAll('.glitch-text-layer');
                    const duration = Math.random() * 200 + 50;

                    layers.forEach(layer => {
                        const xShift = Math.random() * 10 - 5;
                        const yShift = Math.random() * 10 - 5;

                        layer.style.transform = `translate(${xShift}px, ${yShift}px)`;
                        layer.style.clipPath = `inset(${Math.random() * 100}% 0 ${Math.random() * 100}% 0)`;

                        setTimeout(() => {
                            layer.style.transform = '';
                            layer.style.clipPath = '';
                        }, duration);
                    });
                }, 3000);
            }

            // ========================================
            // カスタムマウスエフェクト
            // ========================================
            document.addEventListener('mousemove', function (e) {
                if (Math.random() > 0.98) {
                    const ripple = document.createElement('div');
                    ripple.className = 'cursor-ripple';
                    ripple.style.left = `${e.clientX}px`;
                    ripple.style.top = `${e.clientY}px`;
                    document.body.appendChild(ripple);

                    setTimeout(() => {
                        ripple.remove();
                    }, 1000);
                }
            });

            // ========================================
            // ニューロンネットワークアニメーション
            // ========================================
            const aboutSection = document.getElementById('about');
            if (aboutSection) {
                const neuronNetwork = document.createElement('div');
                neuronNetwork.className = 'neuron-network';

                for (let i = 0; i < 30; i++) {
                    const neuron = document.createElement('div');
                    neuron.className = 'neuron';
                    neuron.style.left = `${Math.random() * 100}%`;
                    neuron.style.top = `${Math.random() * 100}%`;
                    neuron.style.animationDelay = `${Math.random() * 5}s`;
                    neuronNetwork.appendChild(neuron);
                }

                aboutSection.querySelector('.container').appendChild(neuronNetwork);
            }
        });

        // ========================================
        // ナビゲーションバー スクロール処理
        // ========================================
        window.addEventListener('scroll', function () {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // ========================================
        // メール送信機能
        // ========================================
        function sendEmail(event) {
            event.preventDefault();

            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;

            const body = `
    お名前: ${name}
    メールアドレス: ${email}

    ${message}
    `;

            const mailtoLink = `mailto:ryuya.saito.work@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.location.href = mailtoLink;
        }

        // ========================================
        // 流れ星のアニメーション
        // ========================================
        const shootingStars = document.querySelectorAll('.shooting-star');

        shootingStars.forEach((star2, index) => {
            setInterval(() => {
                const posX = Math.random() * 80;
                const posY = Math.random() * 80;
                const delay = index * 3;

                star2.style.left = `${posX}%`;
                star2.style.top = `${posY}%`;
                star2.style.transform = `rotate(${Math.random() * 45}deg)`;

                setTimeout(() => {
                    star2.style.opacity = "1";

                    setTimeout(() => {
                        star2.style.opacity = "0";
                    }, 1000);

                }, delay * 1000);

            }, 6000);
        });

        // ========================================
        // スムーズスクロール機能
        // ========================================
        document.addEventListener('DOMContentLoaded', function () {
            const anchorLinks = document.querySelectorAll('a[href^="#"]');

            anchorLinks.forEach(function (link) {
                link.addEventListener('click', function (e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);

                    if (targetElement) {
                        const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;

                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });

        // ========================================
        // テキスト分割アニメーション
        // ========================================
        function scrollToElement(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                const targetPosition = element.getBoundingClientRect().top + window.pageYOffset;
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        }

        // テキストを文字単位でspanで囲む関数
        function splitText() {
            const elements = document.querySelectorAll('.split-text');

            elements.forEach(element => {
                const text = element.textContent.trim();
                const chars = text.split('');

                let html = '';
                chars.forEach(char => {
                    if (char === ' ') {
                        html += ' ';
                    } else {
                        html += `<span>${char}</span>`;
                    }
                });

                element.innerHTML = html;
            });
        }

        // Intersection Observer APIを使って要素が見えたときにクラスを追加
        function setupObserver() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.2
            });

            document.querySelectorAll('.split-text').forEach(el => {
                observer.observe(el);
            });
        }

        // 初期処理
        document.addEventListener('DOMContentLoaded', () => {
            splitText();
            setupObserver();
        });
    </script>
</body>

</html>
